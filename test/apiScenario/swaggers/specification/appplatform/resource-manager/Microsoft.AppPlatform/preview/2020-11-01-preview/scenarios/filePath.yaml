# yaml-language-server: $schema=/home/me/workspace/azure-rest-api-specs/documentation/api-scenario/references/v1.2/schema.json
scope: ResourceGroup

swaggers:
  - ../appplatform.json

variables:
  serviceName: test-scenario-instance
  ascDomainName: .azuremicroservices.io
  dnsCname: asc

prepareSteps:
  - step: Generate_Unique_ServiceName
    armTemplate: templates/generate_service_name.json

scenarios:
  - steps:
      - operationId: Services_CheckNameAvailability
        parameters:
          availabilityParameters:
            type: Microsoft.AppPlatform/Spring
            name: $(serviceName)

cleanUpSteps:
  - armDeploymentScript: ./templates/delete_record.ps1
    environmentVariables:
      - name: resourceGroupName
        value: $(dnsResourceGroup)
      - name: dnsCname
        value: $(dnsCname)
      - name: dnsZoneName
        value: $(customDomainName)
    variables:
      subscriptionId: $(dnsSubscriptionId)
      resourceGroupName: $(dnsResourceGroup)
